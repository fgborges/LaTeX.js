// Generated by LiveScript 1.6.0
(function(){
  'use strict';
  var Generator, ref$, ligatures, diacritics, katex, Hypher, hEn, SVG, registerWindow, he, flattenDeep, compact, HtmlGenerator, out$ = typeof exports != 'undefined' && exports || this;
  Generator = require('./generator').Generator;
  ref$ = require('./symbols'), ligatures = ref$.ligatures, diacritics = ref$.diacritics;
  katex = require('katex');
  Hypher = require('hypher');
  hEn = require('hyphenation.en-us');
  ref$ = require('@svgdotjs/svg.js'), SVG = ref$.SVG, registerWindow = ref$.registerWindow;
  he = require('he');
  flattenDeep = require('lodash/flattenDeep');
  compact = require('lodash/compact');
  if (global.window === undefined) {
    global.window = eval('require')('svgdom');
    global.document = window.document;
    registerWindow(window, document);
  }
  he.decode.options.strict = true;
  out$.HtmlGenerator = HtmlGenerator = (function(superclass){
    var create, blockRegex, isBlockLevel, appendChildren, debugDOM, debugNode, debugNodes, debugNodeContent, prototype = extend$((import$(HtmlGenerator, superclass).displayName = 'HtmlGenerator', HtmlGenerator), superclass).prototype, constructor = HtmlGenerator;
    HtmlGenerator.prototype.sp = ' ';
    HtmlGenerator.prototype.brsp = '\u200B ';
    HtmlGenerator.prototype.nbsp = he.decode("&nbsp;");
    HtmlGenerator.prototype.visp = he.decode("&blank;");
    HtmlGenerator.prototype.zwnj = he.decode("&zwnj;");
    HtmlGenerator.prototype.shy = he.decode("&shy;");
    HtmlGenerator.prototype.thinsp = he.decode("&thinsp;");
    create = function(type, classes){
      var el;
      el = document.createElement(type);
      el.setAttribute("class", classes);
      return el;
    };
    blockRegex = /^(address|blockquote|body|center|dir|div|dl|fieldset|form|h[1-6]|hr|isindex|menu|noframes|noscript|ol|p|pre|table|ul|dd|dt|frameset|li|tbody|td|tfoot|th|thead|tr|html)$/i;
    isBlockLevel = function(el){
      return blockRegex.test(el.nodeName);
    };
    HtmlGenerator.prototype.inline = "span";
    HtmlGenerator.prototype.block = "div";
    HtmlGenerator.prototype.titlepage = function(){
      return create(prototype.block, "titlepage");
    }();
    HtmlGenerator.prototype.title = function(){
      return create(prototype.block, "title");
    }();
    HtmlGenerator.prototype.author = function(){
      return create(prototype.block, "author");
    }();
    HtmlGenerator.prototype.date = function(){
      return create(prototype.block, "date");
    }();
    HtmlGenerator.prototype.abstract = function(){
      return create(prototype.block, "abstract");
    }();
    HtmlGenerator.prototype.part = "part";
    HtmlGenerator.prototype.chapter = "h1";
    HtmlGenerator.prototype.section = "h2";
    HtmlGenerator.prototype.subsection = "h3";
    HtmlGenerator.prototype.subsubsection = "h4";
    HtmlGenerator.prototype.paragraph = "h5";
    HtmlGenerator.prototype.subparagraph = "h6";
    HtmlGenerator.prototype.linebreak = "br";
    HtmlGenerator.prototype.par = "p";
    HtmlGenerator.prototype.list = function(){
      return create(prototype.block, "list");
    }();
    HtmlGenerator.prototype.unorderedList = function(){
      return create("ul", "list");
    }();
    HtmlGenerator.prototype.orderedList = function(){
      return create("ol", "list");
    }();
    HtmlGenerator.prototype.descriptionList = function(){
      return create("dl", "list");
    }();
    HtmlGenerator.prototype.listitem = "li";
    HtmlGenerator.prototype.term = "dt";
    HtmlGenerator.prototype.description = "dd";
    HtmlGenerator.prototype.itemlabel = function(){
      return create(prototype.inline, "itemlabel");
    }();
    HtmlGenerator.prototype.quote = function(){
      return create(prototype.block, "list quote");
    }();
    HtmlGenerator.prototype.quotation = function(){
      return create(prototype.block, "list quotation");
    }();
    HtmlGenerator.prototype.verse = function(){
      return create(prototype.block, "list verse");
    }();
    HtmlGenerator.prototype.multicols = function(){
      var el;
      el = create(prototype.block, "multicols");
      return function(c){
        el.setAttribute("style", "column-count:" + c);
        return el;
      };
    }();
    HtmlGenerator.prototype.anchor = function(){
      var el;
      el = document.createElement("a");
      return function(id){
        if (id != null) {
          el.id = id;
        }
        return el;
      };
    }();
    HtmlGenerator.prototype.link = function(){
      var el;
      el = document.createElement("a");
      return function(u){
        if (u) {
          el.setAttribute("href", u);
        } else {
          el.removeAttribute("href");
        }
        return el;
      };
    }();
    HtmlGenerator.prototype.verb = function(){
      return create("code", "tt");
    }();
    HtmlGenerator.prototype.verbatim = "pre";
    HtmlGenerator.prototype.picture = function(){
      return create(prototype.inline, "picture");
    }();
    HtmlGenerator.prototype.pictureCanvas = function(){
      return create(prototype.inline, "picture-canvas");
    }();
    HtmlGenerator.prototype.SVG = SVG;
    HtmlGenerator.prototype.KaTeX = katex;
    HtmlGenerator.prototype._dom = null;
    function HtmlGenerator(options){
      this._options = Object.assign({
        documentClass: "article",
        styles: [],
        hyphenate: true,
        languagePatterns: hEn,
        precision: 3
      }, options);
      if (this._options.hyphenate) {
        this._h = new Hypher(this._options.languagePatterns);
      }
      this.reset();
    }
    HtmlGenerator.prototype.reset = function(){
      superclass.prototype.reset.call(this);
      this._dom = document.createDocumentFragment();
    };
    HtmlGenerator.prototype.character = function(c){
      return c;
    };
    HtmlGenerator.prototype.textquote = function(q){
      switch (q) {
      case '`':
        return this.symbol('textquoteleft');
      case '\'':
        return this.symbol('textquoteright');
      }
    };
    HtmlGenerator.prototype.hyphen = function(){
      if (this._activeAttributeValue('fontFamily') === 'tt') {
        return '-';
      } else {
        return he.decode("&hyphen;");
      }
    };
    HtmlGenerator.prototype.ligature = function(l){
      if (this._activeAttributeValue('fontFamily') === 'tt') {
        return l;
      } else {
        return ligatures.get(l);
      }
    };
    HtmlGenerator.prototype.hasDiacritic = function(d){
      return diacritics.has(d);
    };
    HtmlGenerator.prototype.diacritic = function(d, c){
      if (!c) {
        return diacritics.get(d)[1];
      } else {
        return c + diacritics.get(d)[0];
      }
    };
    HtmlGenerator.prototype.controlSymbol = function(c){
      switch (c) {
      case '/':
        return this.zwnj;
      case ',':
        return this.thinsp;
      case '-':
        return this.shy;
      case '@':
        return '\u200B';
      default:
        return this.character(c);
      }
    };
    /* @return the HTMLDocument for use as a standalone webpage
     * @param baseURL the base URL to use to build an absolute URL
     */
    HtmlGenerator.prototype.htmlDocument = function(baseURL){
      var doc, charset, ref$, base;
      doc = document.implementation.createHTMLDocument(this.documentTitle);
      charset = document.createElement("meta");
      charset.setAttribute("charset", "UTF-8");
      doc.head.appendChild(charset);
      if (!baseURL) {
        baseURL = (ref$ = window.location) != null ? ref$.href : void 8;
      }
      if (baseURL) {
        base = document.createElement("base");
        base.href = baseURL;
        doc.head.appendChild(base);
        doc.head.appendChild(this.stylesAndScripts(baseURL));
      } else {
        doc.head.appendChild(this.stylesAndScripts());
      }
      doc.body.appendChild(this.domFragment());
      this.applyLengthsAndGeometryToDom(doc.documentElement);
      return doc;
    };
    /* @return a DocumentFragment consisting of stylesheets and scripts */
    HtmlGenerator.prototype.stylesAndScripts = function(baseURL){
      var el, createStyleSheet, createScript, i$, ref$, len$, style;
      el = document.createDocumentFragment();
      createStyleSheet = function(url){
        var link;
        link = document.createElement("link");
        link.type = "text/css";
        link.rel = "stylesheet";
        link.href = url;
        return link;
      };
      createScript = function(url){
        var script;
        script = document.createElement("script");
        script.src = url;
        return script;
      };
      if (baseURL) {
        el.appendChild(createStyleSheet(new URL("css/katex.css", baseURL).toString()));
        el.appendChild(createStyleSheet(new URL(this.documentClass.constructor.css, baseURL).toString()));
        for (i$ = 0, len$ = (ref$ = this._options.styles).length; i$ < len$; ++i$) {
          style = ref$[i$];
          el.appendChild(createStyleSheet(new URL(style, baseURL).toString()));
        }
        el.appendChild(createScript(new URL("js/base.js", baseURL).toString()));
      } else {
        el.appendChild(createStyleSheet("css/katex.css"));
        el.appendChild(createStyleSheet(this.documentClass.constructor.css));
        for (i$ = 0, len$ = (ref$ = this._options.styles).length; i$ < len$; ++i$) {
          style = ref$[i$];
          el.appendChild(createStyleSheet(style));
        }
        el.appendChild(createScript("js/base.js"));
      }
      return el;
    };
    /* @return DocumentFragment, the full page without stylesheets or scripts */
    HtmlGenerator.prototype.domFragment = function(){
      var el;
      el = document.createDocumentFragment();
      el.appendChild(this.create(this.block, this._dom, "body"));
      if (this._marginpars.length) {
        el.appendChild(this.create(this.block, this.create(this.block, this._marginpars, "marginpar"), "margin-right"));
      }
      return el;
    };
    /* write the TeX lengths and page geometry to the DOM */
    HtmlGenerator.prototype.applyLengthsAndGeometryToDom = function(el){
      var twp, mlwp, mrwp, mpwp;
      el.style.setProperty('--size', this.length('@@size').value);
      twp = 100 * this.length('textwidth').ratio(this.length('paperwidth'));
      mlwp = 100 * this.length('oddsidemargin').add(new this.Length(1, "in")).ratio(this.length('paperwidth'));
      mrwp = Math.max(100 - twp - mlwp, 0);
      el.style.setProperty('--textwidth', this.round(twp) + "%");
      el.style.setProperty('--marginleftwidth', this.round(mlwp) + "%");
      el.style.setProperty('--marginrightwidth', this.round(mrwp) + "%");
      if (mrwp > 0) {
        mpwp = 100 * 100 * this.length('marginparwidth').ratio(this.length('paperwidth')) / mrwp;
        el.style.setProperty('--marginparwidth', this.round(mpwp) + "%");
      } else {
        el.style.setProperty('--marginparwidth', "0px");
      }
      el.style.setProperty('--marginparsep', this.length('marginparsep').value);
      el.style.setProperty('--marginparpush', this.length('marginparpush').value);
    };
    HtmlGenerator.prototype.createDocument = function(fs){
      appendChildren(this._dom, fs);
    };
    HtmlGenerator.prototype.create = function(type, children, classes){
      var el;
      classes == null && (classes = "");
      if (typeof type === "object") {
        el = type.cloneNode(true);
        if (el.hasAttribute("class")) {
          classes = el.getAttribute("class") + " " + classes;
        }
      } else {
        el = document.createElement(type);
      }
      if (this.alignment()) {
        classes += " " + this.alignment();
      }
      if (this._continue && this.location().end.offset > this._continue) {
        classes = classes + " continue";
        this['break']();
      }
      if (classes.trim()) {
        el.setAttribute("class", classes.replace(/\s+/g, ' ').trim());
      }
      return appendChildren(el, children);
    };
    HtmlGenerator.prototype.createText = function(t){
      if (!t) {
        return;
      }
      return this.addAttributes(document.createTextNode(this._options.hyphenate ? this._h.hyphenateText(t) : t));
    };
    HtmlGenerator.prototype.createVerbatim = function(t){
      if (!t) {
        return;
      }
      return document.createTextNode(t);
    };
    HtmlGenerator.prototype.createFragment = function(){
      var children, f;
      children = compact(flattenDeep(arguments));
      if (arguments.length > 0 && (!children || !children.length)) {
        return;
      }
      if (children.length === 1 && children[0].nodeType) {
        return children[0];
      }
      f = document.createDocumentFragment();
      return appendChildren(f, children);
    };
    HtmlGenerator.prototype.createPicture = function(size, offset, content){
      var canvas, pic;
      canvas = this.create(this.pictureCanvas);
      appendChildren(canvas, content);
      if (offset) {
        canvas.setAttribute("style", "left:" + offset.x.mul(-1).value + ";bottom:" + offset.y.mul(-1).value);
      }
      pic = this.create(this.picture);
      pic.appendChild(canvas);
      pic.setAttribute("style", "width:" + size.x.value + ";height:" + size.y.value);
      return pic;
    };
    HtmlGenerator.prototype.createVSpaceSkip = function(skip){
      var span;
      span = document.createElement("span");
      span.setAttribute("class", "vspace " + skip);
      return span;
    };
    HtmlGenerator.prototype.createVSpaceSkipInline = function(skip){
      var span;
      span = document.createElement("span");
      span.setAttribute("class", "vspace-inline " + skip);
      return span;
    };
    HtmlGenerator.prototype.createVSpace = function(length){
      var span;
      span = document.createElement("span");
      span.setAttribute("class", "vspace");
      span.setAttribute("style", "margin-bottom:" + length.value);
      return span;
    };
    HtmlGenerator.prototype.createVSpaceInline = function(length){
      var span;
      span = document.createElement("span");
      span.setAttribute("class", "vspace-inline");
      span.setAttribute("style", "margin-bottom:" + length.value);
      return span;
    };
    HtmlGenerator.prototype.createBreakSpace = function(length){
      var span;
      span = document.createElement("span");
      span.setAttribute("class", "breakspace");
      span.setAttribute("style", "margin-bottom:" + length.value);
      return this.addAttributes(span);
    };
    HtmlGenerator.prototype.createHSpace = function(length){
      var span;
      span = document.createElement("span");
      span.setAttribute("style", "margin-right:" + length.value);
      return span;
    };
    HtmlGenerator.prototype.parseMath = function(math, display){
      var f;
      f = document.createDocumentFragment();
      katex.render(math, f, {
        displayMode: !!display,
        throwOnError: false
      });
      return f;
    };
    HtmlGenerator.prototype.addAttribute = function(el, attrs){
      if (el.hasAttribute("class")) {
        attrs = el.getAttribute("class") + " " + attrs;
      }
      el.setAttribute("class", attrs);
    };
    HtmlGenerator.prototype.hasAttribute = function(el, attr){
      return el.hasAttribute("class") && RegExp('\\b' + attr + '\\b').test(el.getAttribute("class"));
    };
    HtmlGenerator.prototype.addAttributes = function(nodes){
      var attrs;
      attrs = this._inlineAttributes();
      if (!attrs) {
        return nodes;
      }
      if (nodes instanceof window.Element) {
        if (isBlockLevel(nodes)) {
          return this.create(this.block, nodes, attrs);
        } else {
          return this.create(this.inline, nodes, attrs);
        }
      } else if (nodes instanceof window.Text || nodes instanceof window.DocumentFragment) {
        return this.create(this.inline, nodes, attrs);
      } else if (Array.isArray(nodes)) {
        return nodes.map(function(node){
          return this.create(this.inline, node, attrs);
        });
      } else {
        console.warn("addAttributes got an unknown/unsupported argument:", nodes);
      }
      return nodes;
    };
    appendChildren = function(parent, children){
      var i$, to$, i;
      if (children) {
        if (Array.isArray(children)) {
          for (i$ = 0, to$ = children.length; i$ <= to$; ++i$) {
            i = i$;
            if (children[i] != null) {
              parent.appendChild(children[i]);
            }
          }
        } else {
          parent.appendChild(children);
        }
      }
      return parent;
    };
    debugDOM = function(oParent, oCallback){
      var oNode;
      if (oParent.hasChildNodes()) {
        oNode = oParent.firstChild;
        for (; oNode; oNode = oNode.nextSibling) {
          debugDOM(oNode, oCallback);
        }
      }
      oCallback.call(oParent);
    };
    debugNode = function(n){
      if (!n) {
        return;
      }
      if (typeof n.nodeName != "undefined") {
        console.log(n.nodeName + ":", n.textContent);
      } else {
        console.log("not a node:", n);
      }
    };
    debugNodes = function(l){
      var i$, len$, n;
      for (i$ = 0, len$ = l.length; i$ < len$; ++i$) {
        n = l[i$];
        debugNode(n);
      }
    };
    debugNodeContent = function(){
      if (this.nodeValue) {
        console.log(this.nodeValue);
      }
    };
    return HtmlGenerator;
  }(Generator));
  function extend$(sub, sup){
    function fun(){} fun.prototype = (sub.superclass = sup).prototype;
    (sub.prototype = new fun).constructor = sub;
    if (typeof sup.extended == 'function') sup.extended(sub);
    return sub;
  }
  function import$(obj, src){
    var own = {}.hasOwnProperty;
    for (var key in src) if (own.call(src, key)) obj[key] = src[key];
    return obj;
  }
}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9odG1sLWdlbmVyYXRvci5scyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztFQUFBOztFQUlxQixTQUFqQixDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsYUFBQSxDQUFBLENBQUo7RUFDSSxJQUFBLEdBQUEsT0FBQSxDQUFBLFdBQUEsQ0FBQSxFQUFlLFNBQWYsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFKLFNBQUksRUFBMEIsVUFBMUIsQ0FBQSxDQUFBLENBQUEsSUFBQSxDQUFKO0VBQ0ksS0FBQSxDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsT0FBQTtFQUNRLE1BQVIsQ0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLFFBQUE7RUFDcUIsR0FBckIsQ0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLG1CQUFBO0VBQ0EsSUFBQSxHQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLEVBQXNCLEdBQXRCLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBSixHQUFJLEVBQTJCLGNBQTNCLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBSjtFQUNJLEVBQUEsQ0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLElBQUE7RUFFQSxXQUFBLENBQUEsQ0FBQSxDQUFBLE9BQUEsQ0FBQSxvQkFBQTtFQUNBLE9BQUEsQ0FBQSxDQUFBLENBQUEsT0FBQSxDQUFBLGdCQUFBO0VBR0osSUFBRyxNQUFNLENBQUMsTUFBTyxDQUFBLEdBQUEsQ0FBRyxTQUFwQjtJQUVJLE1BQU0sQ0FBQyxNQUFPLENBQUEsQ0FBQSxDQUFFLEtBQUssU0FBRCxFQUFZLFFBQUQ7SUFRL0IsTUFBTSxDQUFDLFFBQVMsQ0FBQSxDQUFBLENBQUUsTUFBTSxDQUFDO0lBRXpCLGVBQWUsUUFBUSxRQUFSOztFQUduQixFQUFFLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFPLENBQUEsQ0FBQSxDQUFFO3VCQUlkLGlCQUFOLFFBQUEsQ0FBQSxVQUFBOzs0QkFLSCxLQUE0Qjs0QkFDNUIsT0FBNEI7NEJBQzVCLE9BQTRCLEVB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RyxLQUFLLENBQUMsT0FBVCxDQUFpQixRQUFBLENBQWpCO1VBQ0ksbURBQUE7O1lBQ21DLElBQUcsUUFBUSxDQUFDLENBQUQsQ0FBUixRQUFIO2NBQS9CLE1BQU0sQ0FBQyxZQUFZLFFBQVEsQ0FBQyxDQUFELENBQVI7OztTQUMzQjtVQUNJLE1BQU0sQ0FBQyxZQUFZLFFBQUE7OztNQUUzQixNQUFBLENBQU8sTUFBUDs7SUFNSixRQUFTLENBQUEsQ0FBQSxDQUFFLFFBQUEsQ0FBQSxPQUFBLEVBQUEsU0FBQTs7TUFDUCxJQUFHLE9BQU8sQ0FBQyxhQUFYLENBQXdCLENBQXhCO1FBQ0ksS0FBTSxDQUFBLENBQUEsQ0FBRSxPQUFPLENBQUM7UUFDaEIsS0FBQSxFQUFNLEtBQU4sRUFBYSxLQUFNLENBQUEsQ0FBQSxDQUFFLEtBQUssQ0FBQyxXQUEzQjtVQUNJLFNBQVMsT0FBTyxTQUFSOzs7TUFFaEIsU0FBUyxDQUFDLEtBQUssT0FBRDs7SUFHbEIsU0FBVSxDQUFBLENBQUEsQ0FBRSxRQUFBLENBQUEsQ0FBQTtNQUNELElBQUcsQ0FBSSxDQUFQO1FBQVAsTUFBQTs7TUFDQSxJQUFHLE9BQU8sQ0FBQyxDQUFDLFFBQVMsQ0FBQSxFQUFBLENBQWUsV0FBcEM7UUFDSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUyxDQUFBLENBQUEsQ0FBSyxLQUFFLENBQUMsQ0FBQyxXQUFwQjtPQUNoQjtRQUNJLE9BQU8sQ0FBQyxJQUFpQixlQUFFLENBQUY7OztJQUVqQyxVQUFXLENBQUEsQ0FBQSxDQUFFLFFBQUEsQ0FBQSxDQUFBOztNQUNULDZDQUFBO1FBQUk7UUFDQSxVQUFVLENBQUE7OztJQUVsQixnQkFBaUIsQ0FBQSxDQUFBLENBQUUsUUFBQSxDQUFBO01BQ2YsSUFBRyxJQUFDLENBQUEsU0FBSjtRQUNJLE9BQU8sQ0FBQyxJQUFJLElBQUMsQ0FBQSxTQUFEOzs7O0lBOWZHIiwiZmlsZSI6Imh0bWwtZ2VuZXJhdG9yLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cblxucmVxdWlyZSEge1xuICAgICcuL2dlbmVyYXRvcic6IHsgR2VuZXJhdG9yIH1cbiAgICAnLi9zeW1ib2xzJzogeyBsaWdhdHVyZXMsIGRpYWNyaXRpY3MgfVxuICAgIGthdGV4XG4gICAgaHlwaGVyOiBIeXBoZXJcbiAgICAnaHlwaGVuYXRpb24uZW4tdXMnOiBoLWVuXG4gICAgJ0Bzdmdkb3Rqcy9zdmcuanMnOiB7IFNWRywgcmVnaXN0ZXJXaW5kb3cgfVxuICAgIGhlXG5cbiAgICAnbG9kYXNoL2ZsYXR0ZW5EZWVwJ1xuICAgICdsb2Rhc2gvY29tcGFjdCdcbn1cblxuaWYgZ2xvYmFsLndpbmRvdyBpcyB1bmRlZmluZWRcbiAgICAjIG9uIHRoZSBzZXJ2ZXIgd2UgbmVlZCB0byBpbmNsdWRlIGEgRE9NIGltcGxlbWVudGF0aW9uIC0gYnV0IGhpZGUgdGhlIHJlcXVpcmUgZnJvbSB3ZWJwYWNrXG4gICAgZ2xvYmFsLndpbmRvdyA9IGV2YWwoJ3JlcXVpcmUnKSgnc3ZnZG9tJylcbiAgICAgICAgIyMgY3VzdG9tIGZvbnQgZGlyZWN0b3J5XG4gICAgICAgICMuc2V0Rm9udERpcignLi9mb250cycpXG4gICAgICAgICMjIG1hcCB0aGUgZm9udC1mYW1pbHkgdG8gdGhlIGZpbGVcbiAgICAgICAgIy5zZXRGb250RmFtaWx5TWFwcGluZ3MoeydBcmlhbCc6ICdhcmlhbC50dGYnfSlcbiAgICAgICAgIyMgeW91IGNhbiBwcmVsb2FkIHlvdXIgZm9udHMgdG8gYXZvaWQgdGhlIGxvYWRpbmcgZGVsYXlcbiAgICAgICAgIyMgd2hlbiB0aGUgZm9udCBpcyB1c2VkIHRoZSBmaXJzdCB0aW1lXG4gICAgICAgICMucHJlbG9hZEZvbnRzKClcbiAgICBnbG9iYWwuZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnRcblxuICAgIHJlZ2lzdGVyV2luZG93IHdpbmRvdywgZG9jdW1lbnRcblxuXG5oZS5kZWNvZGUub3B0aW9ucy5zdHJpY3QgPSB0cnVlXG5cblxuXG5leHBvcnQgY2xhc3MgSHRtbEdlbmVyYXRvciBleHRlbmRzIEdlbmVyYXRvclxuXG4gICAgIyMjIHB1YmxpYyBpbnN0YW5jZSB2YXJzXG5cbiAgICAjIHRva2VucyB0cmFuc2xhdGVkIHRvIGh0bWxcbiAgICBzcDogICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgYnJzcDogICAgICAgICAgICAgICAgICAgICAgICdcXHUyMDBCICcgICAgICAgICAgICAgICAjIFUrMjAwQiArICcgJyBicmVha2FibGUgYnV0IG5vbi1jb2xsYXBzaWJsZSBzcGFjZVxuICAgIG5ic3A6ICAgICAgICAgICAgICAgICAgICAgICBoZS5kZWNvZGUgXCImbmJzcDtcIiAgICAgICMgVSswMEEwXG4gICAgdmlzcDogICAgICAgICAgICAgICAgICAgICAgIGhlLmRlY29kZSBcIiZibGFuaztcIiAgICAgIyBVKzI0MjMgIHZpc2libGUgc3BhY2VcbiAgICB6d25qOiAgICAgICAgICAgICAgICAgICAgICAgaGUuZGVjb2RlIFwiJnp3bmo7XCIgICAgICAjIFUrMjAwQyAgcHJldmVudCBsaWdhdHVyZXNcbiAgICBzaHk6ICAgICAgICAgICAgICAgICAgICAgICAgaGUuZGVjb2RlIFwiJnNoeTtcIiAgICAgICAjIFUrMDBBRCAgd29yZCBicmVhay9oeXBoZW5hdGlvbiBtYXJrZXJcbiAgICB0aGluc3A6ICAgICAgICAgICAgICAgICAgICAgaGUuZGVjb2RlIFwiJnRoaW5zcDtcIiAgICAjIFUrMjAwOVxuXG5cbiAgICAjIyMgcHJpdmF0ZSBzdGF0aWMgdmFyc1xuICAgIGNyZWF0ZSA9ICAgICAgICAgICAgICAgICAgICAodHlwZSwgY2xhc3NlcykgLT4gZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IHR5cGU7IGVsLnNldEF0dHJpYnV0ZSBcImNsYXNzXCIsIGNsYXNzZXM7ICByZXR1cm4gZWxcblxuICAgIGJsb2NrUmVnZXggPSAgICAgICAgICAgICAgICAvL14oYWRkcmVzc3xibG9ja3F1b3RlfGJvZHl8Y2VudGVyfGRpcnxkaXZ8ZGx8ZmllbGRzZXR8Zm9ybXxoWzEtNl18aHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfGlzaW5kZXh8bWVudXxub2ZyYW1lc3xub3NjcmlwdHxvbHxwfHByZXx0YWJsZXx1bHxkZHxkdHxmcmFtZXNldFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8bGl8dGJvZHl8dGR8dGZvb3R8dGh8dGhlYWR8dHJ8aHRtbCkkLy9pXG5cbiAgICBpc0Jsb2NrTGV2ZWwgPSAgICAgICAgICAgICAgKGVsKSAtPiBibG9ja1JlZ2V4LnRlc3QgZWwubm9kZU5hbWVcblxuXG4gICAgIyBnZW5lcmljIGVsZW1lbnRzXG5cbiAgICBpbmxpbmU6ICAgICAgICAgICAgICAgICAgICAgXCJzcGFuXCJcbiAgICBibG9jazogICAgICAgICAgICAgICAgICAgICAgXCJkaXZcIlxuXG5cbiAgICAjIHR5cG9ncmFwaGljIGVsZW1lbnRzXG5cbiAgICB0aXRsZXBhZ2U6ICAgICAgICAgICAgICAgICAgZG8gLT4gY3JlYXRlIDo6YmxvY2ssIFwidGl0bGVwYWdlXCJcbiAgICB0aXRsZTogICAgICAgICAgICAgICAgICAgICAgZG8gLT4gY3JlYXRlIDo6YmxvY2ssIFwidGl0bGVcIlxuICAgIGF1dGhvcjogICAgICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjpibG9jaywgXCJhdXRob3JcIlxuICAgIGRhdGU6ICAgICAgICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjpibG9jaywgXCJkYXRlXCJcblxuICAgIGFic3RyYWN0OiAgICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjpibG9jaywgXCJhYnN0cmFjdFwiXG5cbiAgICBwYXJ0OiAgICAgICAgICAgICAgICAgICAgICAgXCJwYXJ0XCJcbiAgICBjaGFwdGVyOiAgICAgICAgICAgICAgICAgICAgXCJoMVwiXG4gICAgc2VjdGlvbjogICAgICAgICAgICAgICAgICAgIFwiaDJcIlxuICAgIHN1YnNlY3Rpb246ICAgICAgICAgICAgICAgICBcImgzXCJcbiAgICBzdWJzdWJzZWN0aW9uOiAgICAgICAgICAgICAgXCJoNFwiXG4gICAgcGFyYWdyYXBoOiAgICAgICAgICAgICAgICAgIFwiaDVcIlxuICAgIHN1YnBhcmFncmFwaDogICAgICAgICAgICAgICBcImg2XCJcblxuICAgIGxpbmVicmVhazogICAgICAgICAgICAgICAgICBcImJyXCJcblxuICAgIHBhcjogICAgICAgICAgICAgICAgICAgICAgICBcInBcIlxuXG4gICAgbGlzdDogICAgICAgICAgICAgICAgICAgICAgIGRvIC0+IGNyZWF0ZSA6OmJsb2NrLCBcImxpc3RcIlxuXG4gICAgdW5vcmRlcmVkLWxpc3Q6ICAgICAgICAgICAgIGRvIC0+IGNyZWF0ZSBcInVsXCIsICBcImxpc3RcIlxuICAgIG9yZGVyZWQtbGlzdDogICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgXCJvbFwiLCAgXCJsaXN0XCJcbiAgICBkZXNjcmlwdGlvbi1saXN0OiAgICAgICAgICAgZG8gLT4gY3JlYXRlIFwiZGxcIiwgIFwibGlzdFwiXG5cbiAgICBsaXN0aXRlbTogICAgICAgICAgICAgICAgICAgXCJsaVwiXG4gICAgdGVybTogICAgICAgICAgICAgICAgICAgICAgIFwiZHRcIlxuICAgIGRlc2NyaXB0aW9uOiAgICAgICAgICAgICAgICBcImRkXCJcblxuICAgIGl0ZW1sYWJlbDogICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjppbmxpbmUsIFwiaXRlbWxhYmVsXCJcblxuICAgIHF1b3RlOiAgICAgICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjpibG9jaywgXCJsaXN0IHF1b3RlXCJcbiAgICBxdW90YXRpb246ICAgICAgICAgICAgICAgICAgZG8gLT4gY3JlYXRlIDo6YmxvY2ssIFwibGlzdCBxdW90YXRpb25cIlxuICAgIHZlcnNlOiAgICAgICAgICAgICAgICAgICAgICBkbyAtPiBjcmVhdGUgOjpibG9jaywgXCJsaXN0IHZlcnNlXCJcblxuICAgIG11bHRpY29sczogICAgICAgICAgICAgICAgICBkbyAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSBjcmVhdGUgOjpibG9jaywgXCJtdWx0aWNvbHNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChjKSAtPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSBcInN0eWxlXCIsIFwiY29sdW1uLWNvdW50OlwiICsgY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbFxuXG5cbiAgICBhbmNob3I6ICAgICAgICAgICAgICAgICAgICAgZG8gLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcImFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpZCkgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5pZD8gPSBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbFxuXG4gICAgbGluazogICAgICAgICAgICAgICAgICAgICAgIGRvIC0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgXCJhXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAodSkgLT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiB1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSBcImhyZWZcIiwgdVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlIFwiaHJlZlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsXG5cbiAgICB2ZXJiOiAgICAgICAgICAgICAgICAgICAgICAgZG8gLT4gY3JlYXRlIFwiY29kZVwiLCBcInR0XCJcbiAgICB2ZXJiYXRpbTogICAgICAgICAgICAgICAgICAgXCJwcmVcIlxuXG4gICAgcGljdHVyZTogICAgICAgICAgICAgICAgICAgIGRvIC0+IGNyZWF0ZSA6OmlubGluZSwgXCJwaWN0dXJlXCJcbiAgICBwaWN0dXJlLWNhbnZhczogICAgICAgICAgICAgZG8gLT4gY3JlYXRlIDo6aW5saW5lLCBcInBpY3R1cmUtY2FudmFzXCJcblxuXG5cbiAgICAjIyMgcHVibGljIGluc3RhbmNlIHZhcnMgKHZhcnMgYmVnaW5uaW5nIHdpdGggXCJfXCIgYXJlIG1lYW50IHRvIGJlIHByaXZhdGUhKVxuXG4gICAgU1ZHOiBTVkdcbiAgICBLYVRlWDoga2F0ZXhcblxuICAgIF9kb206ICAgbnVsbFxuXG5cblxuICAgICMgQ1RPUlxuICAgICNcbiAgICAjIG9wdGlvbnM6XG4gICAgIyAgLSBkb2N1bWVudENsYXNzOiB0aGUgZGVmYXVsdCBkb2N1bWVudCBjbGFzcyBpZiBhIGRvY3VtZW50IHdpdGhvdXQgcHJlYW1ibGUgaXMgcGFyc2VkXG4gICAgIyAgLSBDdXN0b21NYWNyb3M6IGEgY29uc3RydWN0b3IgKGNsYXNzL2Z1bmN0aW9uKSB3aXRoIGFkZGl0aW9uYWwgY3VzdG9tIG1hY3Jvc1xuICAgICMgIC0gaHlwaGVuYXRlOiBib29sZWFuLCBlbmFibGUgb3IgZGlzYWJsZSBhdXRvbWF0aWMgaHlwaGVuYXRpb25cbiAgICAjICAtIGxhbmd1YWdlUGF0dGVybnM6IGxhbmd1YWdlIHBhdHRlcm5zIG9iamVjdCB0byB1c2UgZm9yIGh5cGhlbmF0aW9uIGlmIGl0IGlzIGVuYWJsZWQgKGRlZmF1bHQgZW4pXG4gICAgIyAgICBUT0RPOiBpbmZlciBsYW5ndWFnZSBmcm9tIExhVGVYIHByZWFtYmxlIGFuZCBsb2FkIGh5cGVuYXRpb24gcGF0dGVybnMgYXV0b21hdGljYWxseVxuICAgICMgIC0gc3R5bGVzOiBhcnJheSB3aXRoIGFkZGl0aW9uYWwgQ1NTIHN0eWxlc2hlZXRzXG4gICAgIyAgLSBwcmVjaXNpb246IHByZWNpc2lvbiBvZiBudW1iZXJzIGluIENTUyBhbmQgU1ZHXG4gICAgKG9wdGlvbnMpIC0+XG4gICAgICAgIEBfb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24ge1xuICAgICAgICAgICAgZG9jdW1lbnRDbGFzczogXCJhcnRpY2xlXCJcbiAgICAgICAgICAgIHN0eWxlczogW11cbiAgICAgICAgICAgIGh5cGhlbmF0ZTogdHJ1ZVxuICAgICAgICAgICAgbGFuZ3VhZ2VQYXR0ZXJuczogaC1lblxuICAgICAgICAgICAgcHJlY2lzaW9uOiAzXG4gICAgICAgIH0sIG9wdGlvbnNcblxuICAgICAgICBpZiBAX29wdGlvbnMuaHlwaGVuYXRlXG4gICAgICAgICAgICBAX2ggPSBuZXcgSHlwaGVyKEBfb3B0aW9ucy5sYW5ndWFnZVBhdHRlcm5zKVxuXG4gICAgICAgIEByZXNldCFcblxuXG4gICAgcmVzZXQ6ICEtPlxuICAgICAgICBzdXBlciFcblxuICAgICAgICBAX2RvbSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQhXG5cblxuXG4gICAgIyMjIGNoYXJhY3Rlci90ZXh0IGNyZWF0aW9uXG5cbiAgICBjaGFyYWN0ZXI6IChjKSAtPlxuICAgICAgICBjXG5cbiAgICB0ZXh0cXVvdGU6IChxKSAtPlxuICAgICAgICBzd2l0Y2ggcVxuICAgICAgICB8ICdgJyAgID0+IEBzeW1ib2wgXFx0ZXh0cXVvdGVsZWZ0XG4gICAgICAgIHwgJ1xcJycgID0+IEBzeW1ib2wgXFx0ZXh0cXVvdGVyaWdodFxuXG4gICAgaHlwaGVuOiAtPlxuICAgICAgICBpZiBAX2FjdGl2ZUF0dHJpYnV0ZVZhbHVlKCdmb250RmFtaWx5JykgPT0gJ3R0J1xuICAgICAgICAgICAgJy0nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFUrMDAyRFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBoZS5kZWNvZGUgXCImaHlwaGVuO1wiICAgICAgICAgICAgICAgICAgICAgICAgIyBVKzIwMTBcblxuICAgIGxpZ2F0dXJlOiAobCkgLT5cbiAgICAgICAgIyBubyBsaWdhdHVyZXMgaW4gdHRcbiAgICAgICAgaWYgQF9hY3RpdmVBdHRyaWJ1dGVWYWx1ZSgnZm9udEZhbWlseScpID09ICd0dCdcbiAgICAgICAgICAgIGxcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbGlnYXR1cmVzLmdldCBsXG5cblxuICAgIGhhc0RpYWNyaXRpYzogKGQpIC0+XG4gICAgICAgIGRpYWNyaXRpY3MuaGFzIGRcblxuICAgICMgZGlhY3JpdGljIGQgZm9yIGNoYXIgY1xuICAgIGRpYWNyaXRpYzogKGQsIGMpIC0+XG4gICAgICAgIGlmIG5vdCBjXG4gICAgICAgICAgICBkaWFjcml0aWNzLmdldChkKVsxXSAgICAgICAgIyBpZiBvbmx5IGQgaXMgZ2l2ZW4sIHVzZSB0aGUgc3RhbmRhbG9uZSB2ZXJzaW9uIG9mIHRoZSBkaWFjcml0aWNcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgYyArIGRpYWNyaXRpY3MuZ2V0KGQpWzBdICAgICMgb3RoZXJ3aXNlIGFkZCBpdCB0byB0aGUgY2hhcmFjdGVyIGNcblxuICAgIGNvbnRyb2xTeW1ib2w6IChjKSAtPlxuICAgICAgICBzd2l0Y2ggY1xuICAgICAgICB8ICcvJyAgICAgICAgICAgICAgICAgICA9PiBAendualxuICAgICAgICB8ICcsJyAgICAgICAgICAgICAgICAgICA9PiBAdGhpbnNwXG4gICAgICAgIHwgJy0nICAgICAgICAgICAgICAgICAgID0+IEBzaHlcbiAgICAgICAgfCAnQCcgICAgICAgICAgICAgICAgICAgPT4gJ1xcdTIwMEInICAgICAgICMgbm90aGluZywganVzdCBwcmV2ZW50IHNwYWNlcyBmcm9tIGNvbGxhcHNpbmdcbiAgICAgICAgfCBfICAgICAgICAgICAgICAgICAgICAgPT4gQGNoYXJhY3RlciBjXG5cblxuICAgICMjIyBnZXQgdGhlIHJlc3VsdFxuXG5cbiAgICAvKiBAcmV0dXJuIHRoZSBIVE1MRG9jdW1lbnQgZm9yIHVzZSBhcyBhIHN0YW5kYWxvbmUgd2VicGFnZVxuICAgICAqIEBwYXJhbSBiYXNlVVJMIHRoZSBiYXNlIFVSTCB0byB1c2UgdG8gYnVpbGQgYW4gYWJzb2x1dGUgVVJMXG4gICAgICovXG4gICAgaHRtbERvY3VtZW50OiAoYmFzZVVSTCkgLT5cbiAgICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50IEBkb2N1bWVudFRpdGxlXG5cbiAgICAgICAgIyMjIGhlYWRcblxuICAgICAgICBjaGFyc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcIm1ldGFcIlxuICAgICAgICBjaGFyc2V0LnNldEF0dHJpYnV0ZSBcImNoYXJzZXRcIiwgXCJVVEYtOFwiXG4gICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkIGNoYXJzZXRcblxuICAgICAgICBpZiBub3QgYmFzZVVSTFxuICAgICAgICAgICAgIyB3aGVuIHVzZWQgaW4gYSBicm93c2VyIGNvbnRleHQsIGFsd2F5cyBpbnNlcnQgYWxsIGFzc2V0cyB3aXRoIGFic29sdXRlIFVSTHM7XG4gICAgICAgICAgICAjIHRoaXMgaXMgYWxzbyB1c2VmdWwgd2hlbiB1c2luZyBhIEJsb2IgaW4gaWZyYW1lLnNyYyAoc2VlIGFsc28gIzEyKVxuICAgICAgICAgICAgYmFzZVVSTCA9IHdpbmRvdy5sb2NhdGlvbj8uaHJlZlxuXG4gICAgICAgIGlmIGJhc2VVUkxcbiAgICAgICAgICAgIGJhc2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwiYmFzZVwiICAgICMgVE9ETzogaXMgdGhlIGJhc2UgZWxlbWVudCBzdGlsbCBuZWVkZWQ/P1xuICAgICAgICAgICAgYmFzZS5ocmVmID0gYmFzZVVSTCAgICAgICAgICAgICAgICAgICAgICMgVE9ETzogbm90IGluIHN2Z2RvbVxuICAgICAgICAgICAgZG9jLmhlYWQuYXBwZW5kQ2hpbGQgYmFzZVxuXG4gICAgICAgICAgICBkb2MuaGVhZC5hcHBlbmRDaGlsZCBAc3R5bGVzQW5kU2NyaXB0cyBiYXNlVVJMXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRvYy5oZWFkLmFwcGVuZENoaWxkIEBzdHlsZXNBbmRTY3JpcHRzIVxuXG5cbiAgICAgICAgIyMjIGJvZHlcblxuICAgICAgICBkb2MuYm9keS5hcHBlbmRDaGlsZCBAZG9tRnJhZ21lbnQhXG4gICAgICAgIEBhcHBseUxlbmd0aHNBbmRHZW9tZXRyeVRvRG9tIGRvYy5kb2N1bWVudEVsZW1lbnRcblxuICAgICAgICByZXR1cm4gZG9jXG5cblxuXG5cbiAgICAvKiBAcmV0dXJuIGEgRG9jdW1lbnRGcmFnbWVudCBjb25zaXN0aW5nIG9mIHN0eWxlc2hlZXRzIGFuZCBzY3JpcHRzICovXG4gICAgc3R5bGVzQW5kU2NyaXB0czogKGJhc2VVUkwpIC0+XG4gICAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCFcblxuICAgICAgICBjcmVhdGVTdHlsZVNoZWV0ID0gKHVybCkgLT5cbiAgICAgICAgICAgIGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwibGlua1wiXG4gICAgICAgICAgICBsaW5rLnR5cGUgPSBcInRleHQvY3NzXCJcbiAgICAgICAgICAgIGxpbmsucmVsID0gXCJzdHlsZXNoZWV0XCJcbiAgICAgICAgICAgIGxpbmsuaHJlZiA9IHVybFxuICAgICAgICAgICAgbGlua1xuXG4gICAgICAgIGNyZWF0ZVNjcmlwdCA9ICh1cmwpIC0+XG4gICAgICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwic2NyaXB0XCJcbiAgICAgICAgICAgIHNjcmlwdC5zcmMgPSB1cmxcbiAgICAgICAgICAgIHNjcmlwdFxuXG4gICAgICAgIGlmIGJhc2VVUkxcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkIGNyZWF0ZVN0eWxlU2hlZXQgbmV3IFVSTChcImNzcy9rYXRleC5jc3NcIiwgYmFzZVVSTCkudG9TdHJpbmchXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZCBjcmVhdGVTdHlsZVNoZWV0IG5ldyBVUkwoQGRvY3VtZW50Q2xhc3NAQGNzcywgYmFzZVVSTCkudG9TdHJpbmchXG5cbiAgICAgICAgICAgIGZvciBzdHlsZSBpbiBAX29wdGlvbnMuc3R5bGVzXG4gICAgICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQgY3JlYXRlU3R5bGVTaGVldCBuZXcgVVJMKHN0eWxlLCBiYXNlVVJMKS50b1N0cmluZyFcblxuICAgICAgICAgICAgZWwuYXBwZW5kQ2hpbGQgY3JlYXRlU2NyaXB0IG5ldyBVUkwoXCJqcy9iYXNlLmpzXCIsIGJhc2VVUkwpLnRvU3RyaW5nIVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZCBjcmVhdGVTdHlsZVNoZWV0IFwiY3NzL2thdGV4LmNzc1wiXG4gICAgICAgICAgICBlbC5hcHBlbmRDaGlsZCBjcmVhdGVTdHlsZVNoZWV0IEBkb2N1bWVudENsYXNzQEBjc3NcblxuICAgICAgICAgICAgZm9yIHN0eWxlIGluIEBfb3B0aW9ucy5zdHlsZXNcbiAgICAgICAgICAgICAgICBlbC5hcHBlbmRDaGlsZCBjcmVhdGVTdHlsZVNoZWV0IHN0eWxlXG5cbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkIGNyZWF0ZVNjcmlwdCBcImpzL2Jhc2UuanNcIlxuXG4gICAgICAgIHJldHVybiBlbFxuXG5cblxuICAgIC8qIEByZXR1cm4gRG9jdW1lbnRGcmFnbWVudCwgdGhlIGZ1bGwgcGFnZSB3aXRob3V0IHN0eWxlc2hlZXRzIG9yIHNjcmlwdHMgKi9cbiAgICBkb21GcmFnbWVudDogLT5cbiAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50IVxuXG4gICAgICAgICMgdGV4dCBib2R5XG4gICAgICAgIGVsLmFwcGVuZENoaWxkIEBjcmVhdGUgQGJsb2NrLCBAX2RvbSwgXCJib2R5XCJcblxuICAgICAgICBpZiBAX21hcmdpbnBhcnMubGVuZ3RoXG4gICAgICAgICAgICAjIG1hcmdpbnBhciBvbiB0aGUgcmlnaHQgLSBUT0RPOiBpcyB0aGVyZSBhbnkgY29uZmlndXJhdGlvbiBwb3NzaWJsZSB0byBzZWxlY3Qgd2hpY2ggbWFyZ2luP1xuICAgICAgICAgICAgI2VsLmFwcGVuZENoaWxkIEBjcmVhdGUgQGJsb2NrLCBudWxsLCBcIm1hcmdpbi1sZWZ0XCJcbiAgICAgICAgICAgIGVsLmFwcGVuZENoaWxkIEBjcmVhdGUgQGJsb2NrLCBAY3JlYXRlKEBibG9jaywgQF9tYXJnaW5wYXJzLCBcIm1hcmdpbnBhclwiKSwgXCJtYXJnaW4tcmlnaHRcIlxuXG4gICAgICAgIHJldHVybiBlbFxuXG5cbiAgICAvKiB3cml0ZSB0aGUgVGVYIGxlbmd0aHMgYW5kIHBhZ2UgZ2VvbWV0cnkgdG8gdGhlIERPTSAqL1xuICAgIGFwcGx5TGVuZ3Roc0FuZEdlb21ldHJ5VG9Eb206IChlbCkgIS0+XG5cbiAgICAgICAgIyByb290IGZvbnQgc2l6ZVxuICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSAnLS1zaXplJywgQGxlbmd0aChcXEBAc2l6ZSkudmFsdWVcblxuICAgICAgICAjIyMgY2FsY3VsYXRlIHBhZ2UgZ2VvbWV0cnlcbiAgICAgICAgI1xuICAgICAgICAjIHNldCBib2R5J3MgYW5kIG1hcmdpbnMnIHdpZHRoIHRvIHBlcmNlbnRhZ2Ugb2Ygdmlld3BvcnQgKD0gcGFwZXJ3aWR0aClcbiAgICAgICAgI1xuICAgICAgICAjIHdlIGNhbm5vdCBkaXN0aW5ndWlzaCBiZXR3ZWVuIGV2ZW4vb2Rkc2lkZW1hcmdpbiAtIGN1cnJlbnRseSwgb25seSBvZGRzaWRlbWFyZ2luIGlzIHVzZWRcbiAgICAgICAgI1xuICAgICAgICAjIHRleHR3aWR0aCBwZXJjZW50ICA9IHRleHR3aWR0aCBweC9wYXBlcndpZHRoIHB4XG4gICAgICAgICMgbWFyZ2lubGVmdHdpZHRoICAlID0gKG9kZHNpZGVtYXJnaW4gcHggKyB0b1B4KDFpbikpL3BhcGVyd2lkdGggcHhcbiAgICAgICAgIyBtYXJnaW5yaWdodHdpZHRoICUgPSAxMDAlIC0gKHRleHR3aWR0aCArIG1hcmdpbmxlZnR3aWR0aCksIGlmIHRoZXJlIGlzIG5vIHJvb20gbGVmdCwgdGhlIG1hcmdpbiBpcyAwJSB3aWR0aFxuXG4gICAgICAgICMgZG8gdGhpcyBpZiBhIHN0YXRpYywgbm9uLXJlc3BvbnNpdmUgcGFnZSBpcyBkZXNpcmVkIChUT0RPOiBtYWtlIGNvbmZpZ3VyYWJsZSEpXG4gICAgICAgICNlbC5zdHlsZS5zZXRQcm9wZXJ0eSAnLS1wYXBlcndpZHRoJywgQGxlbmd0aCBcXHBhcGVyd2lkdGgpLnZhbHVlXG5cbiAgICAgICAgdHdwID0gIDEwMCAqIChAbGVuZ3RoIFxcdGV4dHdpZHRoKS5yYXRpbyhAbGVuZ3RoIFxccGFwZXJ3aWR0aClcbiAgICAgICAgbWx3cCA9IDEwMCAqIChAbGVuZ3RoKFxcb2Rkc2lkZW1hcmdpbikuYWRkIG5ldyBATGVuZ3RoIDEsIFwiaW5cIikucmF0aW8oQGxlbmd0aCBcXHBhcGVyd2lkdGgpXG4gICAgICAgIG1yd3AgPSBNYXRoLm1heCgxMDAgLSB0d3AgLSBtbHdwLCAwKVxuXG4gICAgICAgIGVsLnN0eWxlLnNldFByb3BlcnR5ICctLXRleHR3aWR0aCcsIEByb3VuZCh0d3ApICsgXCIlXCJcbiAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkgJy0tbWFyZ2lubGVmdHdpZHRoJywgQHJvdW5kKG1sd3ApICsgXCIlXCJcbiAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkgJy0tbWFyZ2lucmlnaHR3aWR0aCcsIEByb3VuZChtcndwKSArIFwiJVwiXG5cbiAgICAgICAgaWYgbXJ3cCA+IDBcbiAgICAgICAgICAgICMgbWFyZ2lucGFyd2lkdGggcGVyY2VudGFnZSByZWxhdGl2ZSB0byBwYXJlbnQsIHdoaWNoIGlzIG1hcmdpbnJpZ2h0d2lkdGghXG4gICAgICAgICAgICBtcHdwID0gMTAwICogMTAwICogKEBsZW5ndGggXFxtYXJnaW5wYXJ3aWR0aCkucmF0aW8oQGxlbmd0aCBcXHBhcGVyd2lkdGgpIC8gbXJ3cFxuICAgICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkgJy0tbWFyZ2lucGFyd2lkdGgnLCBAcm91bmQobXB3cCkgKyBcIiVcIlxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSAnLS1tYXJnaW5wYXJ3aWR0aCcsIFwiMHB4XCJcblxuICAgICAgICAjIHNldCB0aGUgcmVzdCBvZiB0aGUgbGVuZ3RocyAoVE9ETzogd3JpdGUgYWxsIGRlZmluZWQgbGVuZ3RocyB0byBDU1MsIGZvciBlYWNoIGdyb3VwKVxuICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSAnLS1tYXJnaW5wYXJzZXAnLCBAbGVuZ3RoKFxcbWFyZ2lucGFyc2VwKS52YWx1ZVxuICAgICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSAnLS1tYXJnaW5wYXJwdXNoJywgQGxlbmd0aChcXG1hcmdpbnBhcnB1c2gpLnZhbHVlXG5cblxuXG5cbiAgICAjIyMgZG9jdW1lbnQgY3JlYXRpb25cblxuICAgIGNyZWF0ZURvY3VtZW50OiAoZnMpICEtPlxuICAgICAgICBhcHBlbmRDaGlsZHJlbiBAX2RvbSwgZnNcblxuXG5cbiAgICAjIyMgZWxlbWVudCBjcmVhdGlvblxuXG4gICAgY3JlYXRlOiAodHlwZSwgY2hpbGRyZW4sIGNsYXNzZXMgPSBcIlwiKSAtPlxuICAgICAgICBpZiB0eXBlb2YgdHlwZSA9PSBcIm9iamVjdFwiXG4gICAgICAgICAgICBlbCA9IHR5cGUuY2xvbmVOb2RlIHRydWVcbiAgICAgICAgICAgIGlmIGVsLmhhc0F0dHJpYnV0ZSBcImNsYXNzXCJcbiAgICAgICAgICAgICAgICBjbGFzc2VzID0gZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgKyBcIiBcIiArIGNsYXNzZXNcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IHR5cGVcblxuICAgICAgICBpZiBAYWxpZ25tZW50IVxuICAgICAgICAgICAgY2xhc3NlcyArPSBcIiBcIiArIEBhbGlnbm1lbnQhXG5cblxuICAgICAgICAjIGlmIGNvbnRpbnVlIHRoZW4gZG8gbm90IGFkZCBwYXJpbmRlbnQgb3IgcGFyc2tpcCwgd2UgYXJlIG5vdCBzdXBwb3NlZCB0byBzdGFydCBhIG5ldyBwYXJhZ3JhcGhcbiAgICAgICAgaWYgQF9jb250aW51ZSBhbmQgQGxvY2F0aW9uIS5lbmQub2Zmc2V0ID4gQF9jb250aW51ZVxuICAgICAgICAgICAgY2xhc3NlcyA9IGNsYXNzZXMgKyBcIiBjb250aW51ZVwiXG4gICAgICAgICAgICBAYnJlYWshXG5cbiAgICAgICAgaWYgY2xhc3Nlcy50cmltIVxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlIFwiY2xhc3NcIiwgY2xhc3Nlcy5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSFcblxuICAgICAgICBhcHBlbmRDaGlsZHJlbiBlbCwgY2hpbGRyZW5cblxuICAgICMgY3JlYXRlIGEgdGV4dCBub2RlIHRoYXQgaGFzIGZvbnQgYXR0cmlidXRlcyBzZXQgYW5kIGFsbG93cyBmb3IgaHlwaGVuYXRpb25cbiAgICBjcmVhdGVUZXh0OiAodCkgLT5cbiAgICAgICAgcmV0dXJuIGlmIG5vdCB0XG4gICAgICAgIEBhZGRBdHRyaWJ1dGVzIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlIGlmIEBfb3B0aW9ucy5oeXBoZW5hdGUgdGhlbiBAX2guaHlwaGVuYXRlVGV4dCB0IGVsc2UgdFxuXG4gICAgIyBjcmVhdGUgYSBwdXJlIHRleHQgbm9kZSB3aXRob3V0IGZvbnQgYXR0cmlidXRlcyBhbmQgbm8gaHlwaGVuYXRpb25cbiAgICBjcmVhdGVWZXJiYXRpbTogKHQpIC0+XG4gICAgICAgIHJldHVybiBpZiBub3QgdFxuICAgICAgICBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSB0XG5cbiAgICAjIGNyZWF0ZSBhIGZyYWdtZW50OyBhcmd1bWVudHMgbWF5IGJlIE5vZGUocykgYW5kL29yIGFycmF5cyBvZiBOb2RlKHMpXG4gICAgY3JlYXRlRnJhZ21lbnQ6IC0+XG4gICAgICAgIGNoaWxkcmVuID0gY29tcGFjdCBmbGF0dGVuRGVlcCBhcmd1bWVudHNcblxuICAgICAgICAjIG9ubHkgY3JlYXRlIGFuIGVtcHR5IGZyYWdtZW50IGlmIGV4cGxpY2l0ZWx5IHJlcXVlc3RlZDogbm8gYXJndW1lbnRzIGdpdmVuXG4gICAgICAgIHJldHVybiBpZiBhcmd1bWVudHMubGVuZ3RoID4gMCBhbmQgKG5vdCBjaGlsZHJlbiBvciAhY2hpbGRyZW4ubGVuZ3RoKVxuXG4gICAgICAgICMgZG9uJ3Qgd3JhcCBhIHNpbmdsZSBub2RlXG4gICAgICAgIHJldHVybiBjaGlsZHJlbi4wIGlmIGNoaWxkcmVuLmxlbmd0aCA9PSAxIGFuZCBjaGlsZHJlbi4wLm5vZGVUeXBlXG5cbiAgICAgICAgZiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQhXG4gICAgICAgIGFwcGVuZENoaWxkcmVuIGYsIGNoaWxkcmVuXG5cblxuICAgIGNyZWF0ZVBpY3R1cmU6IChzaXplLCBvZmZzZXQsIGNvbnRlbnQpIC0+XG4gICAgICAgICMgY2FudmFzXG4gICAgICAgIGNhbnZhcyA9IEBjcmVhdGUgQHBpY3R1cmUtY2FudmFzICAgICAgICAgICAgIyBUT0RPOiB0aGlzIG1pZ2h0IGFkZCBDU1MgY2xhc3Nlcy4uLiBvaz9cbiAgICAgICAgYXBwZW5kQ2hpbGRyZW4gY2FudmFzLCBjb250ZW50XG5cbiAgICAgICAgIyBvZmZzZXQgc2V0cyB0aGUgY29vcmRpbmF0ZXMgb2YgdGhlIGxvd2VyIGxlZnQgY29ybmVyLCBzbyBzaGlmdCBuZWdhdGl2ZWx5XG4gICAgICAgIGlmIG9mZnNldFxuICAgICAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSBcInN0eWxlXCIsIFwibGVmdDoje29mZnNldC54Lm11bCgtMSkudmFsdWV9O2JvdHRvbToje29mZnNldC55Lm11bCgtMSkudmFsdWV9XCJcblxuICAgICAgICAjIHBpY3R1cmVcbiAgICAgICAgcGljID0gQGNyZWF0ZSBAcGljdHVyZVxuICAgICAgICBwaWMuYXBwZW5kQ2hpbGQgY2FudmFzXG4gICAgICAgIHBpYy5zZXRBdHRyaWJ1dGUgXCJzdHlsZVwiLCBcIndpZHRoOiN7c2l6ZS54LnZhbHVlfTtoZWlnaHQ6I3tzaXplLnkudmFsdWV9XCJcblxuICAgICAgICBwaWNcblxuXG5cblxuXG4gICAgIyBmb3Igc2tpcCA9PSBzbWFsbHNraXAsIG1lZHNraXAsIGJpZ3NraXBcbiAgICBjcmVhdGVWU3BhY2VTa2lwOiAoc2tpcCkgLT5cbiAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgXCJzcGFuXCJcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUgXCJjbGFzc1wiLCBcInZzcGFjZSBcIiArIHNraXBcbiAgICAgICAgcmV0dXJuIHNwYW5cblxuICAgIGNyZWF0ZVZTcGFjZVNraXBJbmxpbmU6IChza2lwKSAtPlxuICAgICAgICBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcInNwYW5cIlxuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSBcImNsYXNzXCIsIFwidnNwYWNlLWlubGluZSBcIiArIHNraXBcbiAgICAgICAgcmV0dXJuIHNwYW5cblxuXG4gICAgY3JlYXRlVlNwYWNlOiAobGVuZ3RoKSAtPlxuICAgICAgICBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCBcInNwYW5cIlxuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSBcImNsYXNzXCIsIFwidnNwYWNlXCJcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUgXCJzdHlsZVwiLCBcIm1hcmdpbi1ib3R0b206XCIgKyBsZW5ndGgudmFsdWVcbiAgICAgICAgcmV0dXJuIHNwYW5cblxuICAgIGNyZWF0ZVZTcGFjZUlubGluZTogKGxlbmd0aCkgLT5cbiAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgXCJzcGFuXCJcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUgXCJjbGFzc1wiLCBcInZzcGFjZS1pbmxpbmVcIlxuICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSBcInN0eWxlXCIsIFwibWFyZ2luLWJvdHRvbTpcIiArIGxlbmd0aC52YWx1ZVxuICAgICAgICByZXR1cm4gc3BhblxuXG4gICAgIyBjcmVhdGUgYSBsaW5lYnJlYWsgd2l0aCBhIGdpdmVuIHZzcGFjZSBiZXR3ZWVuIHRoZSBsaW5lc1xuICAgIGNyZWF0ZUJyZWFrU3BhY2U6IChsZW5ndGgpIC0+XG4gICAgICAgIHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50IFwic3BhblwiXG4gICAgICAgIHNwYW4uc2V0QXR0cmlidXRlIFwiY2xhc3NcIiwgXCJicmVha3NwYWNlXCJcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUgXCJzdHlsZVwiLCBcIm1hcmdpbi1ib3R0b206XCIgKyBsZW5ndGgudmFsdWVcbiAgICAgICAgIyB3ZSBuZWVkIHRvIGFkZCB0aGUgY3VycmVudCBmb250IGluIGNhc2UgaXQgdXNlcyBhIHJlbGF0aXZlIGxlbmd0aCAoZS5nLiBlbSlcbiAgICAgICAgcmV0dXJuIEBhZGRBdHRyaWJ1dGVzIHNwYW5cblxuICAgIGNyZWF0ZUhTcGFjZTogKGxlbmd0aCkgLT5cbiAgICAgICAgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgXCJzcGFuXCJcbiAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUgXCJzdHlsZVwiLCBcIm1hcmdpbi1yaWdodDpcIiArIGxlbmd0aC52YWx1ZVxuICAgICAgICByZXR1cm4gc3BhblxuXG5cblxuXG4gICAgcGFyc2VNYXRoOiAobWF0aCwgZGlzcGxheSkgLT5cbiAgICAgICAgZiA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQhXG4gICAgICAgIGthdGV4LnJlbmRlciBtYXRoLCBmLFxuICAgICAgICAgICAgZGlzcGxheU1vZGU6ICEhZGlzcGxheVxuICAgICAgICAgICAgdGhyb3dPbkVycm9yOiBmYWxzZVxuICAgICAgICBmXG5cblxuXG4gICAgIyMgYXR0cmlidXRlcyBhbmQgbm9kZXMvZWxlbWVudHNcblxuICAgICMgYWRkIHRoZSBnaXZlbiBhdHRyaWJ1dGUocykgdG8gYSBzaW5nbGUgZWxlbWVudFxuICAgIGFkZEF0dHJpYnV0ZTogKGVsLCBhdHRycykgIS0+XG4gICAgICAgIGlmIGVsLmhhc0F0dHJpYnV0ZSBcImNsYXNzXCJcbiAgICAgICAgICAgIGF0dHJzID0gZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgKyBcIiBcIiArIGF0dHJzXG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZSBcImNsYXNzXCIsIGF0dHJzXG5cbiAgICBoYXNBdHRyaWJ1dGU6IChlbCwgYXR0cikgLT5cbiAgICAgICAgZWwuaGFzQXR0cmlidXRlIFwiY2xhc3NcIiBhbmQgLy9cXGIje2F0dHJ9XFxiLy8udGVzdCBlbC5nZXRBdHRyaWJ1dGUgXCJjbGFzc1wiXG5cblxuICAgICMgdGhpcyB3cmFwcyB0aGUgY3VycmVudCBhdHRyaWJ1dGUgdmFsdWVzIGFyb3VuZCB0aGUgZ2l2ZW4gZWxlbWVudCBvciBhcnJheSBvZiBlbGVtZW50c1xuICAgIGFkZEF0dHJpYnV0ZXM6IChub2RlcykgLT5cbiAgICAgICAgYXR0cnMgPSBAX2lubGluZUF0dHJpYnV0ZXMhXG4gICAgICAgIHJldHVybiBub2RlcyBpZiBub3QgYXR0cnNcblxuICAgICAgICBpZiBub2RlcyBpbnN0YW5jZW9mIHdpbmRvdy5FbGVtZW50XG4gICAgICAgICAgICBpZiBpc0Jsb2NrTGV2ZWwgbm9kZXNcbiAgICAgICAgICAgICAgICByZXR1cm4gQGNyZWF0ZSBAYmxvY2ssIG5vZGVzLCBhdHRyc1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiBAY3JlYXRlIEBpbmxpbmUsIG5vZGVzLCBhdHRyc1xuICAgICAgICBlbHNlIGlmIG5vZGVzIGluc3RhbmNlb2Ygd2luZG93LlRleHQgb3Igbm9kZXMgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRGcmFnbWVudFxuICAgICAgICAgICAgcmV0dXJuIEBjcmVhdGUgQGlubGluZSwgbm9kZXMsIGF0dHJzXG4gICAgICAgIGVsc2UgaWYgQXJyYXkuaXNBcnJheSBub2Rlc1xuICAgICAgICAgICAgcmV0dXJuIG5vZGVzLm1hcCAobm9kZSkgLT4gQGNyZWF0ZSBAaW5saW5lLCBub2RlLCBhdHRyc1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjb25zb2xlLndhcm4gXCJhZGRBdHRyaWJ1dGVzIGdvdCBhbiB1bmtub3duL3Vuc3VwcG9ydGVkIGFyZ3VtZW50OlwiLCBub2Rlc1xuXG4gICAgICAgIHJldHVybiBub2Rlc1xuXG5cblxuXG4gICAgIyMjIHByaXZhdGUgaGVscGVyc1xuXG4gICAgYXBwZW5kQ2hpbGRyZW4gPSAocGFyZW50LCBjaGlsZHJlbikgLT5cbiAgICAgICAgaWYgY2hpbGRyZW5cbiAgICAgICAgICAgIGlmIEFycmF5LmlzQXJyYXkgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICBmb3IgaSB0byBjaGlsZHJlbi5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkIGNoaWxkcmVuW2ldIGlmIGNoaWxkcmVuW2ldP1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZCBjaGlsZHJlblxuXG4gICAgICAgIHJldHVybiBwYXJlbnRcblxuXG5cbiAgICAjIHByaXZhdGUgdXRpbGl0aWVzXG5cbiAgICBkZWJ1Z0RPTSA9IChvUGFyZW50LCBvQ2FsbGJhY2spICEtPlxuICAgICAgICBpZiBvUGFyZW50Lmhhc0NoaWxkTm9kZXMoKVxuICAgICAgICAgICAgb05vZGUgPSBvUGFyZW50LmZpcnN0Q2hpbGRcbiAgICAgICAgICAgIHdoaWxlIG9Ob2RlLCBvTm9kZSA9IG9Ob2RlLm5leHRTaWJsaW5nXG4gICAgICAgICAgICAgICAgZGVidWdET00ob05vZGUsIG9DYWxsYmFjaylcblxuICAgICAgICBvQ2FsbGJhY2suY2FsbChvUGFyZW50KVxuXG5cbiAgICBkZWJ1Z05vZGUgPSAobikgIS0+XG4gICAgICAgIHJldHVybiBpZiBub3QgblxuICAgICAgICBpZiB0eXBlb2Ygbi5ub2RlTmFtZSAhfj0gXCJ1bmRlZmluZWRcIlxuICAgICAgICAgICAgY29uc29sZS5sb2cgbi5ub2RlTmFtZSArIFwiOlwiLCBuLnRleHRDb250ZW50XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGNvbnNvbGUubG9nIFwibm90IGEgbm9kZTpcIiwgblxuXG4gICAgZGVidWdOb2RlcyA9IChsKSAhLT5cbiAgICAgICAgZm9yIG4gaW4gbFxuICAgICAgICAgICAgZGVidWdOb2RlIG5cblxuICAgIGRlYnVnTm9kZUNvbnRlbnQgPSAhLT5cbiAgICAgICAgaWYgQG5vZGVWYWx1ZVxuICAgICAgICAgICAgY29uc29sZS5sb2cgQG5vZGVWYWx1ZVxuIl19
